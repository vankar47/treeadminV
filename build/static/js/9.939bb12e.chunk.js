(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{382:function(e,a,t){"use strict";var r=t(0),n=t.n(r),l=t(364),o=t(389),s=t(367);a.a=function(e){var a=e.error,t=e.label,r=e.className,c=e.onChange,i=r+" form-control form-control-alternative text-black";return a&&(i+=" border border-danger"),n.a.createElement(l.a,null,t&&n.a.createElement(o.a,{className:"form-control-label"},t),n.a.createElement(s.a,Object.assign({},e,{className:i,autoComplete:"off",onChange:function(e){c&&c(e.target.value)}})),a&&n.a.createElement("div",{className:"alert alert-danger"},a))}},383:function(e,a,t){"use strict";var r=t(39);a.a={uploadImage:function(e,a){return r.a.post("/media/image",e,{},{},{onUploadProgress:a})},uploadVideo:function(e,a){return r.a.post("/media/video",e,{},{},{onUploadProgress:a})}}},384:function(e,a,t){e.exports=t.p+"static/media/img-placeholder.eeffb618.png"},386:function(e,a,t){"use strict";var r=t(0),n=t.n(r);a.a=function(e){var a=e.checked,t=e.onChange,r=e.label;return n.a.createElement(n.a.Fragment,null,r&&n.a.createElement("label",{className:"form-control-label mt-2"},r),n.a.createElement("br",null),n.a.createElement("label",{className:"custom-toggle mt-2"},n.a.createElement("input",{type:"checkbox",checked:a,onChange:function(e){e.preventDefault(),t(e.target.checked)}}),n.a.createElement("span",{className:"custom-toggle-slider rounded-circle"})))}},391:function(e,a,t){"use strict";var r=t(39);a.a={edit:function(e,a,t){return r.a.put("/categories/"+e,a,{"x-auth-token":t})},create:function(e,a){return r.a.post("/categories",e,{"x-auth-token":a})},get:function(e,a){return r.a.get("/categories/"+e,{"x-auth-token":a})},delete:function(e,a){return r.a.delete("/categories/"+e,{"x-auth-token":a})}}},394:function(e,a,t){"use strict";t(393);var r=t(0),n=t.n(r),l=t(401);a.a=function(e){var a=e.error,t=e.label,r=(e.value,"my-select");return a&&(r+=" my-input-error"),n.a.createElement("div",{className:"form-group"},t&&n.a.createElement("label",null,t),n.a.createElement(l.a,Object.assign({},e,{className:r})),a&&n.a.createElement("p",{className:"my-input-error-text",style:{color:"red"}},a))}},421:function(e,a,t){"use strict";t.r(a);var r=t(393),n=t(21),l=t.n(n),o=t(37),s=t(13),c=t(14),i=t(16),u=t(15),m=t(17),d=t(45),p=t(0),g=t.n(p),f=t(86),v=t(382),b=(t(386),t(43)),h=t.n(b),E=t(356),w=t(369),y=t(388),x=t(370),N=t(395),k=t(19),T=t(26),j=t(88),O=t(85),C=t(391),S=t(23),P=t(394),U=t(383),I=t(384),A=t.n(I),F={name:h.a.string().min(2).max(50).trim().required(),image:h.a.string().allow("").trim().optional(),allowedTypes:h.a.array().items(h.a.string().trim()).min(1).required()},D=[{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"texteditor",label:"Text Editor"}],M=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).componentDidMount=function(){var e=t.props.match.params._id;t.getCategory(e)},t.getCategory=function(){var e=Object(o.a)(l.a.mark(function e(a){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.adminAuthToken,e.prev=1,e.delegateYield(l.a.mark(function e(){var n,o,s,c,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),e.next=3,C.a.get(a,r);case 3:for(n=e.sent,o=n.data.image,s=[],c=function(e){var a=n.data.allowedTypes[e];D.forEach(function(e){e.value!==a||s.push(e)})},i=0;i<n.data.allowedTypes.length;i++)c(i);u={name:n.data.name,allowedTypes:s},t.setState({imagePreview:o,form:u});case 10:case"end":return e.stop()}},e)})(),"t0",3);case 3:e.next=8;break;case 5:e.prev=5,e.t1=e.catch(1),Object(O.a)(e.t1);case 8:return e.prev=8,t.setState({loading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,null,[[1,5,8,11]])}));return function(a){return e.apply(this,arguments)}}(),t.editCategory=Object(o.a)(l.a.mark(function e(){var a,n,o,s,c,i,u,m,d;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state,n=a.form,!a.isUploading){e.next=3;break}return e.abrupt("return",alert("Please wait until image upload comletes."));case 3:for(o=Object(r.a)({},n),s=[],c=0;c<n.allowedTypes.length;c++)i=n.allowedTypes[c],s.push(i.value);if(o.allowedTypes=s,!(u=Object(j.a)(o,F))){e.next=10;break}return e.abrupt("return",t.setState({errors:u}));case 10:return e.prev=10,t.setState({loading:!0}),m=t.props.match.params._id,d=t.props.adminAuthToken,e.next=16,C.a.edit(m,o,d);case 16:e.sent,k.toast.success(g.a.createElement(T.a,{title:"Success",message:"Category editted successfuly"})),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0),Object(O.a)(e.t0);case 24:return e.prev=24,t.setState({loading:!1}),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[10,20,24,27]])})),t.onImageChange=function(){var e=Object(o.a)(l.a.mark(function e(a){var r,n,o,s,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.target.files[0],(n=new FileReader).readAsDataURL(r),n.onloadend=function(e){this.setState({imagePreview:n.result})}.bind(Object(d.a)(Object(d.a)(t))),e.prev=4,o=t.state.form,t.setState({isUploading:!0,uploadProgress:0}),(s=new FormData).append("image",r),e.next=11,U.a.uploadImage(s,t.onUploadProgress);case 11:c=e.sent,o.image=c.data._id,t.setState({form:o}),console.log(o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),Object(O.a)(e.t0);case 20:return e.prev=20,t.setState({isUploading:!1}),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[4,17,20,23]])}));return function(a){return e.apply(this,arguments)}}(),t.onUploadProgress=function(e){var a=Math.round(100*e.loaded/e.total);t.setState({uploadProgress:a})},t.state={imagePreview:null,isUploading:!1,uploadProgress:0,form:{image:"",name:"",allowedTypes:[]},errors:{}},t}return Object(m.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.form,r=a.errors,n=a.imagePreview,l=a.isUploading,o=a.uploadProgress;return g.a.createElement(g.a.Fragment,null,g.a.createElement(f.a,null),g.a.createElement(E.a,{className:"mt--7",fluid:!0},g.a.createElement(w.a,{className:"shadow"},g.a.createElement(y.a,null,g.a.createElement("div",{className:"clearfix"},g.a.createElement("h2",{className:"mb-0 float-left"},"Edit Category"))),g.a.createElement(x.a,{className:"bg-secondary"},g.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.editCategory()}},g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-12"},g.a.createElement("img",{className:"mb-2",src:n||A.a,style:{width:"200px"},alt:"category image"}),l&&g.a.createElement(N.a,{value:o,style:{width:"200px"}}),g.a.createElement("br",null),g.a.createElement("label",{for:"imageInput"},g.a.createElement("span",{className:"btn btn-primary btn-sm"},"Pick Image")),g.a.createElement("input",{type:"file",onChange:this.onImageChange,className:"d-none",id:"imageInput"})),g.a.createElement("div",{className:"col-md-6"},g.a.createElement(v.a,{label:"Name",value:t.name,placeholder:"Name",onChange:function(a){t.name=a,r.name="",e.setState({form:t,errors:r})},error:r.name})),g.a.createElement("div",{className:"col-md-6"},g.a.createElement(P.a,{name:"allowedTypes",label:"File Type",isMulti:!0,placeholder:"File Type",value:this.state.form.allowedTypes,onChange:function(a){console.log("Value =>",a),t.allowedTypes=a,r.allowedTypes="",e.setState({form:t})},options:D,error:r.allowedTypes})),g.a.createElement("div",{className:"col-12"},g.a.createElement("div",{className:"text-center"},g.a.createElement("button",{className:"btn btn-primary m-auto",type:"submit"},"Save")))))))))}}]),a}(p.Component);a.default=Object(S.b)(function(e){return{adminAuthToken:e.auth.adminAuthToken}})(M)}}]);
//# sourceMappingURL=9.939bb12e.chunk.js.map