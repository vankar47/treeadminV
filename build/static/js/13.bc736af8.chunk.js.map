{"version":3,"sources":["http/usersHttp.js","components/Table/UsersTable.js","pages/Users.js"],"names":["_services_http__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","__webpack_exports__","edit","form","adminAuthToken","http","post","x-auth-token","create","get","_id","createUserSession","userId","$","require","UserTable","state","loading","componentDidMount","DataTable","language","paginate","next","previous","processing","serverSide","order","ajax","url","apiPath","type","columns","data","columnDefs","targets","createdCell","_this","renderUsernameCell","renderEmailCell","renderBlockedCell","renderLinkButtons","_callee","res","headers","xAuthToken","user","regenerator_default","a","wrap","_context","prev","window","confirm","abrupt","setState","props","usersHttp","sent","storage","save","location","href","t0","handleHttpErrors","finish","stop","td","cellData","rowData","row","col","ReactDOM","render","react_default","createElement","className","isEmailVerified","onClick","navigateToEditUser","history","push","basePath","this","style","position","id","top","left","right","bottom","backgroundColor","Component","connect","auth","Users","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","Fragment","Header","Container","fluid","Card","CardHeader","Link","to","CardBody","UsersTable"],"mappings":"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","file":"static/js/13.bc736af8.chunk.js","sourcesContent":["import http from \"../services/http\";\n\nconst create = (form, adminAuthToken) => {\n  return http.post(\"/users\", form, { \"x-auth-token\": adminAuthToken });\n};\nconst get = (_id, adminAuthToken) => {\n  return http.get(\"/users/admin/\" + _id, { \"x-auth-token\": adminAuthToken });\n};\n\nconst edit = (form, adminAuthToken) => {\n  return http.post(\"/users/edit\", form, { \"x-auth-token\": adminAuthToken });\n};\n\nconst createUserSession = (userId, adminAuthToken) => {\n  return http.post(\n    \"/users/create_user_session/\" + userId,\n    {},\n    {\n      \"x-auth-token\": adminAuthToken,\n    }\n  );\n};\nexport default {\n  edit,\n  create,\n  get,\n  createUserSession,\n};\n","import React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Media } from \"reactstrap\";\nimport { apiPath } from \"../../configs\";\nimport { connect } from \"react-redux\";\nimport \"datatables.net-bs4/css/dataTables.bootstrap4.min.css\";\nimport * as $ from \"jquery/dist/jquery\";\nimport usersHttp from \"../../http/usersHttp\";\nimport { handleHttpErrors } from \"../../helpers/error\";\nimport storage from \"../../services/storage\";\nimport { basePath } from \"../../configs\";\n$.DataTable = require(\"datatables.net-bs4\");\n\nclass UserTable extends Component {\n  state = {\n    loading: false,\n  };\n  componentDidMount = () => {\n    $(\"#userTable\").DataTable({\n      language: {\n        paginate: {\n          next:\n            '<span class=\"pagination-fa\"><i class=\"fa fa-chevron-right\" ></i></span>',\n          previous:\n            '<span class=\"pagination-fa\"><i class=\"fa fa-chevron-left\" ></i></span>',\n        },\n      },\n      processing: true,\n      serverSide: true,\n      order: [[0, \"_id\"]],\n\n      ajax: {\n        url: apiPath + \"/users\",\n        type: \"GET\",\n      },\n\n      columns: [\n        { data: \"username\" },\n        { data: \"name\" },\n        { data: \"email\" },\n        { data: \"isBlocked\" },\n        { data: \"isEmailVerified\" },\n      ],\n\n      columnDefs: [\n        {\n          targets: 0,\n          createdCell: this.renderUsernameCell,\n        },\n        {\n          targets: 2,\n          createdCell: this.renderEmailCell,\n        },\n        { targets: 3, createdCell: this.renderBlockedCell },\n        {\n          targets: 4,\n          createdCell: this.renderLinkButtons,\n        },\n      ],\n    });\n  };\n\n  createUserSession = async (userId) => {\n    const conf = window.confirm(\n      \"Are you sure you want to use this users session?\"\n    );\n    if (!conf) return;\n    try {\n      this.setState({ loading: true });\n      const { adminAuthToken } = this.props;\n      const res = await usersHttp.createUserSession(userId, adminAuthToken);\n      const { headers, data } = res;\n      const xAuthToken = headers[\"x-auth-token\"];\n      const user = data;\n      storage.save(\"xAuthToken\", xAuthToken);\n      storage.save(\"user\", user);\n      // storage.remove(\"adminAuthToken\");\n      // storage.remove(\"adminUser\");\n      window.location.href = \"/\";\n    } catch (err) {\n      handleHttpErrors(err);\n    } finally {\n      this.setState({ loading: false });\n    }\n  };\n  renderUsernameCell = (td, cellData, rowData, row, col) => {\n    return ReactDOM.render(<div>@{cellData}</div>, td);\n  };\n\n  renderEmailCell = (td, cellData, rowData, row, col) => {\n    return ReactDOM.render(\n      <div>\n        {cellData}{\" \"}\n        <span className=\"ml-1\">\n          <i\n            className={\n              rowData.isEmailVerified != true\n                ? \"fa fa-times text-danger\"\n                : \"fas fa-check text-success\"\n            }\n          ></i>\n        </span>\n      </div>,\n      td\n    );\n  };\n\n  renderBlockedCell = (td, cellData, rowData, row, col) => {\n    return ReactDOM.render(\n      <div>\n        {cellData ? \"Blocked\" : \"Active\"}\n        {/* <i className=\"fa fa-pencil-alt\"></i> */}\n      </div>,\n      td\n    );\n  };\n\n  renderLinkButtons = (td, cellData, rowData, row, col) => {\n    return ReactDOM.render(\n      <div>\n        <button\n          className=\"btn btn-primary btn-sm \"\n          onClick={() => {\n            this.navigateToEditUser(rowData._id);\n          }}\n        >\n          <i className=\"fa fa-pencil-alt\"></i>\n        </button>\n        {/* //createUserSession */}\n\n        <button\n          className=\"btn btn-success btn-sm \"\n          onClick={() => {\n            this.createUserSession(rowData._id);\n          }}\n        >\n          <i className=\"fa fa-user\"></i>\n        </button>\n\n        {/* <button\n          className=\"btn btn-danger btn-sm \"\n          onClick={() => {\n            this.deleteUser(rowData._id, td);\n          }}\n        >\n          <i className=\"fa fa-trash-alt\"></i>\n        </button> */}\n      </div>,\n      td\n    );\n  };\n\n  navigateToEditUser = (_id) => {\n    this.props.history.push(basePath + \"/users/\" + _id);\n  };\n  render() {\n    const { loading } = this.state;\n    return (\n      <div style={{ position: \"relative\" }}>\n        <table id=\"userTable\" className=\"w-100 table table-striped\">\n          <thead>\n            <tr>\n              <th>Username</th>\n              <th>Name</th>\n              <th>Email</th>\n              <th>Status</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n        </table>\n        {loading && (\n          <div\n            className=\"pt-5\"\n            style={{\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: \"rgba(0,0,0,0.5)\",\n            }}\n          >\n            <h1 className=\"text-white text-center \">Generating Session</h1>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    adminAuthToken: state.auth.adminAuthToken,\n  };\n};\nexport default connect(mapStateToProps)(UserTable);\n","import React, { Component } from \"react\";\nimport Header from \"../components/Headers/Header\";\nimport { Container, Card, CardBody, CardHeader } from \"reactstrap\";\nimport { Link } from \"react-router-dom\";\nimport { basePath } from \"../configs\";\nimport UserTable from \"../components/Table/UsersTable\";\n\nclass Users extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <>\n        <Header />\n        <Container className=\"mt--7\" fluid>\n          <Card className=\"shadow\">\n            <CardHeader className=\"bg-secondary\">\n              <div className=\"clearfix\">\n                <h2 className=\"mb-0 float-left\">Users</h2>\n                <Link\n                  className=\"float-right btn btn-dark btn-sm\"\n                  to={basePath + \"/users/add\"}\n                >\n                  Add <i className=\"fa fa-user text-white\"></i>\n                </Link>\n              </div>\n            </CardHeader>\n            <CardBody>\n              <UserTable history={this.props.history} />\n            </CardBody>\n          </Card>\n        </Container>\n      </>\n    );\n  }\n}\n\nexport default Users;\n"],"sourceRoot":""}