(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{382:function(e,a,t){"use strict";var r=t(0),n=t.n(r),l=t(364),o=t(389),s=t(367);a.a=function(e){var a=e.error,t=e.label,r=e.className,c=e.onChange,i=r+" form-control form-control-alternative text-black";return a&&(i+=" border border-danger"),n.a.createElement(l.a,null,t&&n.a.createElement(o.a,{className:"form-control-label"},t),n.a.createElement(s.a,Object.assign({},e,{className:i,autoComplete:"off",onChange:function(e){c&&c(e.target.value)}})),a&&n.a.createElement("div",{className:"alert alert-danger"},a))}},383:function(e,a,t){"use strict";var r=t(39);a.a={uploadImage:function(e,a){return r.a.post("/media/image",e,{},{},{onUploadProgress:a})},uploadVideo:function(e,a){return r.a.post("/media/video",e,{},{},{onUploadProgress:a})}}},384:function(e,a,t){e.exports=t.p+"static/media/img-placeholder.eeffb618.png"},386:function(e,a,t){"use strict";var r=t(0),n=t.n(r);a.a=function(e){var a=e.checked,t=e.onChange,r=e.label;return n.a.createElement(n.a.Fragment,null,r&&n.a.createElement("label",{className:"form-control-label mt-2"},r),n.a.createElement("br",null),n.a.createElement("label",{className:"custom-toggle mt-2"},n.a.createElement("input",{type:"checkbox",checked:a,onChange:function(e){e.preventDefault(),t(e.target.checked)}}),n.a.createElement("span",{className:"custom-toggle-slider rounded-circle"})))}},391:function(e,a,t){"use strict";var r=t(39);a.a={edit:function(e,a,t){return r.a.put("/categories/"+e,a,{"x-auth-token":t})},create:function(e,a){return r.a.post("/categories",e,{"x-auth-token":a})},get:function(e,a){return r.a.get("/categories/"+e,{"x-auth-token":a})},delete:function(e,a){return r.a.delete("/categories/"+e,{"x-auth-token":a})}}},394:function(e,a,t){"use strict";t(393);var r=t(0),n=t.n(r),l=t(401);a.a=function(e){var a=e.error,t=e.label,r=(e.value,"my-select");return a&&(r+=" my-input-error"),n.a.createElement("div",{className:"form-group"},t&&n.a.createElement("label",null,t),n.a.createElement(l.a,Object.assign({},e,{className:r})),a&&n.a.createElement("p",{className:"my-input-error-text",style:{color:"red"}},a))}},420:function(e,a,t){"use strict";t.r(a);var r=t(21),n=t.n(r),l=t(393),o=t(37),s=t(13),c=t(14),i=t(16),m=t(15),u=t(17),d=t(45),p=t(0),g=t.n(p),f=t(86),b=t(382),v=(t(386),t(43)),h=t.n(v),E=t(356),y=t(369),w=t(388),N=t(370),k=t(395),x=t(19),j=t(26),O=t(88),T=t(85),C=t(391),P=t(23),S=t(394),U=t(383),I=t(384),A=t.n(I),F={name:h.a.string().min(2).max(50).trim().required(),image:h.a.string().allow("").trim().optional(),allowedTypes:h.a.array().items(h.a.string().trim()).min(1).required()},D=[{value:"image",label:"Image"},{value:"video",label:"Video"},{value:"audio",label:"Audio"},{value:"texteditor",label:"Text Editor"}],q=function(e){function a(e){var t;return Object(s.a)(this,a),(t=Object(i.a)(this,Object(m.a)(a).call(this,e))).createCategory=Object(o.a)(n.a.mark(function e(){var a,r,o,s,c,i,m,u;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.state,r=a.form,!a.isUploading){e.next=3;break}return e.abrupt("return",alert("Please wait until image upload comletes."));case 3:for(o=Object(l.a)({},r),s=[],c=0;c<r.allowedTypes.length;c++)i=r.allowedTypes[c],s.push(i.value);if(o.allowedTypes=s,!(m=Object(O.a)(o,F))){e.next=10;break}return e.abrupt("return",t.setState({errors:m}));case 10:return e.prev=10,t.setState({loading:!0}),u=t.props.adminAuthToken,e.next=15,C.a.create(o,u);case 15:e.sent,x.toast.success(g.a.createElement(j.a,{title:"Success",message:"Category created successfuly"})),t.props.history.goBack(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),console.log(e.t0),Object(T.a)(e.t0);case 25:return e.prev=25,t.setState({loading:!1}),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[10,21,25,28]])})),t.onImageChange=function(){var e=Object(o.a)(n.a.mark(function e(a){var r,l,o,s,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.target.files[0],(l=new FileReader).readAsDataURL(r),l.onloadend=function(e){this.setState({imagePreview:l.result})}.bind(Object(d.a)(Object(d.a)(t))),e.prev=4,o=t.state.form,t.setState({isUploading:!0,uploadProgress:0}),(s=new FormData).append("image",r),e.next=11,U.a.uploadImage(s,t.onUploadProgress);case 11:c=e.sent,o.image=c.data._id,t.setState({form:o}),console.log(o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),Object(T.a)(e.t0);case 20:return e.prev=20,t.setState({isUploading:!1}),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[4,17,20,23]])}));return function(a){return e.apply(this,arguments)}}(),t.onUploadProgress=function(e){var a=Math.round(100*e.loaded/e.total);t.setState({uploadProgress:a})},t.state={imagePreview:null,isUploading:!1,uploadProgress:0,form:{image:"",name:"",allowedTypes:[]},errors:{}},t}return Object(u.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.form,r=a.errors,n=a.imagePreview,l=a.isUploading,o=a.uploadProgress;return g.a.createElement(g.a.Fragment,null,g.a.createElement(f.a,null),g.a.createElement(E.a,{className:"mt--7",fluid:!0},g.a.createElement(y.a,{className:"shadow"},g.a.createElement(w.a,null,g.a.createElement("div",{className:"clearfix"},g.a.createElement("h2",{className:"mb-0 float-left"},"Add Category"))),g.a.createElement(N.a,{className:"bg-secondary"},g.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.createCategory()}},g.a.createElement("div",{className:"row"},g.a.createElement("div",{className:"col-12"},g.a.createElement("img",{className:"mb-2",src:n||A.a,style:{width:"200px"},alt:"category image"}),l&&g.a.createElement(k.a,{value:o,style:{width:"200px"}}),g.a.createElement("br",null),g.a.createElement("label",{for:"imageInput"},g.a.createElement("span",{className:"btn btn-primary btn-sm"},"Pick Image")),g.a.createElement("input",{type:"file",onChange:this.onImageChange,className:"d-none",id:"imageInput"})),g.a.createElement("div",{className:"col-md-6"},g.a.createElement(b.a,{label:"Name",value:t.name,placeholder:"Name",onChange:function(a){t.name=a,r.name="",e.setState({form:t,errors:r})},error:r.name})),g.a.createElement("div",{className:"col-md-6"},g.a.createElement(S.a,{name:"allowedTypes",label:"File Type",isMulti:!0,placeholder:"File Type",value:this.state.form.allowedTypes,onChange:function(a){t.allowedTypes=a,r.allowedTypes="",e.setState({form:t})},options:D,error:r.allowedTypes})),g.a.createElement("div",{className:"col-12"},g.a.createElement("div",{className:"text-center"},g.a.createElement("button",{className:"btn btn-primary m-auto",type:"submit"},"Save")))))))))}}]),a}(p.Component);a.default=Object(P.b)(function(e){return{adminAuthToken:e.auth.adminAuthToken}})(q)}}]);
//# sourceMappingURL=8.27368482.chunk.js.map